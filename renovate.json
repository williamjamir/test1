{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:base",
    ":semanticCommits",
    ":disableDependencyDashboard",
    ":preserveSemverRanges"
  ],
  "updateLockFiles": true,
  "separateMultipleMajor": true,
  "lockFileMaintenance": {
    "enabled": true
  },
  "schedule": ["at any time"],
  "commitBodyTable": true,
  "rebaseWhen": "behind-base-branch",
  "rollbackPrs": true,
  "prConcurrentLimit": 5,
  "labels": [
    "dependencies"
  ],
  "description": "A base Renovate preset for python projects",
  "timezone": "Europe/Berlin",
  "enabledManagers": [
    "pip_requirements",
    "github-actions"
  ],
  "pip_requirements": {
    "fileMatch": [
      "requirements.txt",
      "requirements-dev.txt"
    ]
  },
  "separateMajorMinor": false,
  "packageRules": [
    { "matchDatasources": ["python","git-tags"]},
    {
      "groupName": "Python",
      "matchPaths": [
        "requirements.txt"
      ],
      "rangeStrategy": "replace",
      "automerge": false
    },
    {
      "groupName": "Python Dev",
      "matchPaths": [
        "requirements-dev.txt"
      ],
      "rangeStrategy": "replace",
      "automerge": true
    },
    {
      "groupName": "GitHub Actions",
      "matchManagers": [
        "github-actions"
      ],
      "rangeStrategy": "replace",
      "automerge": true
    },
    {
      "matchPackageNames": [
        "newrelic"
      ],
      "allowedVersions": "<=7.10.0.175",
      "description": "We had an issue with 7.16.0.178, let's keep it pinned for a few weeks"
    },
    {
      "matchPackageNames": [
        "uvicorn"
      ],
      "allowedVersions": "<0.18.0",
      "description": "https://github.com/tiangolo/fastapi/blob/master/pyproject.toml#L99"
    },
    {
      "matchPackageNames": [
        "aioredis"
      ],
      "allowedVersions": "<2.0.0",
      "description": "arq v0.23: https://github.com/samuelcolvin/arq/releases"
    },
    {
      "matchPackageNames": [
        "redis"
      ],
      "allowedVersions": "<4.0.0",
      "description": "arq v0.23: https://github.com/samuelcolvin/arq/releases"
    }
  ]
}
